---
title: "PROYECTOR2019"
author: "CAMILLA MOSSEDDU"
date: "16/11/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
install.packages('rvest')

```

## R Markdown


```{r}
#Loading the rvest package
library('rvest')

#Specifying the url for desired website to be scraped
url <- 'https://www.milanuncios.com/coches-de-segunda-mano-en-madrid/'

#Reading the HTML code from the website
webpage <- read_html(url)

precio_data_html <- html_nodes(webpage,'.aditem-price')
precio_data <- html_text(precio_data_html)
head(precio_data)

kms_data_html <- html_nodes(webpage,'.kms.tag-mobile')
kms_data <- html_text(kms_data_html)
head(kms_data)

ano_data_html <- html_nodes(webpage,'.ano.tag-mobile')
ano_data <- html_text(ano_data_html)
head(ano_data)

die_data_html <- html_nodes(webpage,'.die.tag-mobile')
die_data <- html_text(die_data_html)
head(die_data)


cc_data_html <- html_nodes(webpage,'.cc.tag-mobile')
cc_data <- html_text(cc_data_html)
head(cc_data)

cauto_data_html <- html_nodes(webpage,'.cauto.tag-mobile')
cauto_data <- html_text(cauto_data_html)
head(cauto_data)

for(i in 1:length(precio_data)){
  #precio_data[i]<-substr(precio_data[i],1,nchar(precio_data[i])-1)
  precio_data[i] <- gsub("€", "", precio_data[i])
}

head(precio_data)

for(i in 1:length(ano_data)){
  ano_data[i] <- gsub("año ", "", ano_data[i])
}

head(ano_data)

for(i in 1:length(cc_data)){
  cc_data[i] <- gsub(" cv", "", cc_data[i])
}

head(cc_data)

for(i in 1:length(kms_data)){
  kms_data[i] <- gsub(" kms", "", kms_data[i])
}

head(kms_data)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
